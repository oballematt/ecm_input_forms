<div id="overlay" style="display:none;">
    <div class="spinner"></div>
    <br />
    <p class='overlayMessage'>Getting data, this will take a few seconds</p>
</div>
<div class="offcanvas offcanvas-start" tabindex="-1" id="sideNav" aria-labelledby="offcanvasExampleLabel">
    <div class="sidebar-container">
        <div class="sidebar-logo">
            UT Energy Hub
        </div>
        {{> sidebar}}
    </div>

</div>
<div class="container-fluid" style='height: 100%'>

    <div style="height: 100%;" class="row">
        <div style="width: 30.5%" class="col-xxl-4 col-lg-4 searchBox">
            <button class="btn btn-dark sidebar" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideNav"
                aria-controls="offcanvasExample">
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="input-group mb-2 mt-3">
                <label class="input-group-text" for="filter-steward">Steward:</label>
                <select class="form-select" id="filter-steward">
                    <option disabled selected>Select Steward</option>
                    <option value='null'>All</option>
                    <option value='adam.keeling@austin.utexas.edu'>Adam Keeling</option>
                    <option value="grace.hsieh@austin.utexas.edu">Grace Hsieh</option>
                    <option value="matt.stevens@austin.utexas.edu">Matt Stevens</option>
                    <option value="mjones@austin.utexas.edu">Meagan Jones</option>
                </select>
                <button type='button' class="btn btn-primary apply">Apply</button>
            </div>
            <div class="ring text-center mt-3 mb-3">
                <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            <div style="display: none;" class="hide-meters">

                <table id="table" data-show-multi-sort="true"
                    data-sort-priority='[{"sortName": "building_abbreviation","sortOrder":"asc"},{"sortName":"meter","sortOrder":"asc"}]'
                    data-toolbar-align="right" data-search-align="left" data-toolbar="#toolbar" data-height="448"
                    data-search="true" data-virtual-scroll="true" style="color: white">

                    <thead style="color: white">
                        <tr class="rowData">
                            <th data-field="state" data-radio="true"></th>
                            <th data-sortable="true" data-field="building_abbreviation">Building</th>
                            <th data-sortable="true" data-field="meter">Meter</th>
                            <th data-sortable="true" data-field="value_count"># Flagged Days
                            </th>
                            <th data-sortable="true" data-field="model_update_timestamp">Last Model</th>
                            <th data-visible='false' data-field="building_number">Building Number</th>
                            <th data-visible="false" data-field="commodity_tag">Commodity</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="out-of-bounds"></div>
            <button style=" color:white" type="button" id="button" class="confirmMeter btn btn-success mt-3">Confirm
                Meter
                Selection</button>
            <button style=" color:white; display: none" type="button" id="button"
                class="confirmAlarmMeter btn btn-success mt-3">Confirm
                Meter
                Selection
            </button>
            <ul class="list-group mt-3 mb-3">
                <li class="list-group-item listGroupColor">
                    <div class="ms-2 me-auto">
                        <div class="fw-bold">Current Meter Selection:</div>
                        <div class="meterSelection">--</div>
                    </div>
                </li>
            </ul>
            {{!-- <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#savedModels">
                    Previously Saved Models (0)
                </button> --}}
            <div class="input-group flex-nowrap mt-3">
                <span style='width: 120px' class="input-group-text" id="addon-wrapping">Model Start:</span>
                <input autocomplete="off" disabled='true' id="modelStart" type="text"
                    class="form-control datepicker disabled modelStart" placeholder="yyyy/mm/dd"
                    aria-label="Model Start Date" aria-describedby="addon-wrapping">
            </div>
            <div class="input-group flex-nowrap mt-3">
                <span style='width: 120px' class="input-group-text" id="addon-wrapping">Model End:</span>
                <input disabled="true" type="text" class="form-control datepicker disabled modelEnd"
                    placeholder="yyyy/mm/dd" aria-label="Model End Date" aria-describedby="addon-wrapping">
            </div>
            <div class="input-group flex-nowrap mt-3">
                <span style='width: 120px' class="input-group-text" id="addon-wrapping">Analysis Start:</span>
                <input disabled="true" type="text" class="form-control datepicker disabled analysisStart"
                    placeholder="yyyy/mm/dd" aria-label="Analysis Start Date" aria-describedby="addon-wrapping">
            </div>
            <div class="input-group flex-nowrap mt-3">
                <span style='width: 120px' class="input-group-text" id="addon-wrapping">Analysis End:</span>
                <input disabled="true" type="text" class="form-control datepicker disabled analysisEnd"
                    placeholder="yyyy/mm/dd" aria-label="Analysis End Date" aria-describedby="addon-wrapping">
            </div>
            <button style="background-color: #bf5700;" class="btn btn-primary apiGateway mt-3 mb-3 w-100 load"
                type="button">Run Model</button>


            <div style="display: none;">
                <p class="currentBuilding"></p>
                <p class="currentCommodity"></p>
                <p class="currentVariable"></p>
                <p class="currentStart"></p>
                <p class="currentEnd"></p>
            </div>
        </div>
        <div style='width: 69.5%' class="col-xxl-8 col-lg-8">
            <li class='headings'>
                <h6 style='color: white'>Building:
                    <span class="units currentBuildingName">--</span>
                </h6>
            </li>
            <li class='headings'>
                <h6 style='color: white'>Meter:
                    <span class="units currentMeter">--</span>
                </h6>
            </li>
            <li class='headings'>
                <h6 style='color: white'>Variable:
                    <span class="units meterVariable">--</span>
                </h6>
            </li>
            <header class='currentAttributes'>
                <li class='headings'>
                    <h6 style='color: white;'>Current Model:
                        <span style='color: transparent' class="units ">.</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Base Temp:
                        <span class="units baseTemp">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>% Auto Ignored:
                        <span class="units autoIgnored">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Slope:
                        <span class="units slope">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Intercept:
                        <span class="units intercept">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>R-Squared:
                        <span class="units r2">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Std Dev:
                        <span class="units stdDev">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Start Date:
                        <span class="units start">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>End Date:
                        <span class="units end">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <button style='margin-bottom: 20px' type="button"
                        class="btn btn-success headings saveAttributes text-center">Save</button>
                </li>

            </header>
            <header style="display: none;" class='savedAttributes'>
                <li class='headings'>
                    <h6 style='color: white'>Saved Model:
                        <span style='color: transparent' class="units">.</span>
                    </h6>
                </li>

                <li class='headings'>
                    <h6 style='color: white'>Base Temp:
                        <span class="units savedBaseTemp">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>% Auto Ignored:
                        <span class="units savedAutoIgnored">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Slope:
                        <span class="units savedSlope">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Intercept:
                        <span class="units savedIntercept">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>R-Squared:
                        <span class="units savedR2">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Std Dev:
                        <span class="units savedStdDev">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>Start Date:
                        <span class="units savedStart">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <h6 style='color: white'>End Date:
                        <span class="units savedEnd">--</span>
                    </h6>
                </li>
                <li class='headings'>
                    <button style='margin-bottom: 20px; margin-left: 11px' type="button"
                        class="btn btn-primary headings copyAttributeDates">Copy Dates</button>
                </li>

            </header>

            <div style="display: none;" class="displayData">
                <div style="width: 100%;" id="collapseRow">
                    <div class="row mt-3">
                        <div class="col-md-3 collapseButton">
                            <button class="btn btn-primary show-hide" type="button" data-bs-toggle="collapse"
                                data-bs-target="#myCollapse" aria-expanded="false" aria-controls="myCollapse">
                                <i class="fa fa-eye"></i> <span>Show Historic</span>
                            </button>
                        </div>
                    </div>
                    <div class="mt-3 collapse" style="width: 100%;" id="myCollapse">
                        <div class="collapseChart">
                            <div class="card card-body">
                                <div id="dashboard">
                                    <div id="chart_div"></div>
                                    <div id="control_div"></div>
                                    <h4 class='text-center mt-3' style="color: white"><span id='dbgchart'></span>
                                    </h4>
                                    <div class="div text-center">
                                        <button type="button" class="btn btn-success copyModelDates">Copy selected
                                            dates to
                                            Model</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id='chartData' class="row responsive mt-3">
                    <div id="hideIfWater" class="col-xxl-6 col-xl-12">
                        <div class="card">
                            <div style="height: 500px" class="card-body">
                                <canvas class="myChart" id="myChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div id="fullWidth" class="col-xxl-6 col-xl-12">
                        <div class="card">
                            <div style="height: 500px" class="card-body">
                                <canvas id="myChart2"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="successAlert"></div>
                <div id="tableData" class="row mb-3 responsive">
                    <div class="col-xxl-12 col-xl-12 text-start">
                        <div class='card w-100'>
                            <div class='card-body'>
                                <ul class="list-group list-group-horizontal mb-3">
                                    <li style="color: white; border: .5px solid; border-color: black"
                                        class="list-group-item bg-transparent"><i style="color: #F0AD4E"
                                            class="fas fa-square"></i> Value <i class="fas fa-less-than-equal"></i> Low
                                        Limit</li>
                                    <li style="color: white; border: .5px solid; border-color: black"
                                        class="list-group-item bg-transparent"><i style="color: #d9534f"
                                            class="fas fa-square"></i> Value <i class="fas fa-greater-than-equal"></i>
                                        High Limit</li>
                                    <li style="color: white; border: .5px solid; border-color: black"
                                        class="list-group-item bg-transparent"><i style="color: #0275d8"
                                            class="fas fa-square"></i> Value same as previous day</li>
                                </ul>
                                <div class='scroll' style="height: 1000px; overflow: scroll; overflow-x: hidden">
                                    <table class="table text-light tableData table-fixed">
                                        <thead>
                                            <tr>
                                                <th scope="col">Edit</th>
                                                <th scope="col">Date</th>
                                                <th scope="col">Temperature</th>
                                                <th class='x' scope="col"></th>
                                                <th scope="col">Meter Reading</th>
                                                <th scope="col">Expected</th>
                                                <th scope="col">Replacement</th>
                                                <th scope="col">Reason</th>
                                                <th scope="col">Notes</th>
                                            </tr>
                                        </thead>
                                        <tbody class='tableBody'>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <div class="row d-flex justify-content-evenly">
                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <label class='input-group-text' for="reason">Reason</label>
                                            <select class="form-select" id="reason" aria-label="Default select example">
                                                <option disabled selected>Choose...</option>
                                                <option>Investigate</option>
                                                <option>Meter Issue</option>
                                                <option>Building Maintenance Issue</option>
                                                <option>Major Renovation/Addition in Progress</option>
                                                <option>Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-primary w-100" type="button" data-bs-toggle="offcanvas"
                                            data-bs-target="#offcanvasBottom"
                                            aria-controls="offcanvasBottom">Notes</button>
                                    </div>
                                    <div class="col-md-3 replace d-flex justify-content-center align-items-center">
                                        <div class="form-check">
                                            <label class="form-check-label" for="replace">
                                                Replace?
                                            </label>
                                            <input class="form-check-input" type="checkbox" id="replace">

                                        </div>
                                    </div>
                                    <div class="col-md-3 ms-auto">
                                        <button disabled style="background-color: #bf5700; color: white" id="button3"
                                            class="btn w-100 load" type="button">Submit
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="offcanvas offcanvas-bottom text-end" data-bs-scroll='true' tabindex="-1" id="offcanvasBottom"
        aria-labelledby="offcanvasBottomLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasBottomLabel">Notes</h5>
            <button type="button" class="btn-close text-reset mr-2" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body small">
            <textarea id='notes' style="width: 100%; height: 100%"></textarea>
        </div>
    </div>